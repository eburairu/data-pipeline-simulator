# 実装計画: コードベース改善と最適化

## 概要
この計画は、Data Pipeline Simulator の技術的負債への対処、型安全の向上、パフォーマンスの最適化、およびアーキテクチャの改善に焦点を当てています。包括的なコードベース調査に基づき、いくつかの重要な領域が強化対象として特定されました。

## 目標
1.  **型安全の強化**: 残存する `any` 型を排除する。特にコアロジック（`ExpressionFunctions`）とUIコンポーネント（`App.tsx`）で、i18n の厳格な型付けを導入する。
2.  **アーキテクチャのリファクタリング**: モノリシックな `App.tsx` をより小さく管理しやすいコンポーネントに分解し、関心の重いロジック（マイグレーションなど）をコンテキストから分離する。
3.  **パフォーマンスの最適化**: `JobMonitor` と `BiDashboard` のレンダリングを最適化して、より大きなデータセットに対応できるよう準備する。
4.  **UIの標準化**: 設定コンポーネント（`ParamInput`）を統一して重複を削減する。

## フェーズ別アプローチ

### フェーズ 1: 型安全とコアロジック
アプリケーションを動かす基本ロジックに焦点を当てる。
- `ExpressionFunctions.ts` をジェネリクスを使用するようリファクタリング。
- `i18n` とコンテキストの型定義を改善。

### フェーズ 2: アーキテクチャの分解
最大のコンポーネントを分解して保守性を向上。
- `App.tsx` から `StorageView` と `DatabaseView` を抽出。
- マイグレーションロジックを `DataContext.tsx` から移動。

### フェーズ 3: UI標準化とパフォーマンス
ユーザーインターフェースコードとレンダリングパフォーマンスを改善。
- 再利用可能な `ParamInput` コンポーネントを作成。
- モニターとダッシュボードのリスト描画を最適化。

## リスクと軽減策
- **リスク**: `App.tsx` のリファクタリングがシミュレーションマネージャーとUIの連携を壊す可能性。
    - **軽減**: 厳格なプロパティ型付けとコンポーネントテストで動作を検証。
- **リスク**: `ExpressionFunctions` の型変更がユーザー定義式のランタイム動作に影響する可能性。
    - **軽減**: リファクタリング前に式のユニットテストを強化。
